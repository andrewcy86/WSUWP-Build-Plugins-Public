var CustomizeSnapshotsFrontend=function(a){"use strict";var b={data:{uuid:"",l10n:{restoreSessionPrompt:""},confirmationMsg:""}};return b.init=function(c){_.extend(b.data,c),b.hasSessionStorage="undefined"!=typeof sessionStorage,b.keepSessionAlive(),b.rememberSessionSnapshot(),b.handleExitSnapshotSessionLink(),b.data.uuid&&a(document).ready(function(){b.setupPublishButton()})},b.keepSessionAlive=function(){var c,d,e;b.hasSessionStorage&&(c=sessionStorage.getItem("customize_changeset_uuid"),c&&!b.data.uuid&&(d=document.createElement("a"),d.href=location.href,d.search.length>1&&(d.search+="&"),d.search+="customize_changeset_uuid="+encodeURIComponent(sessionStorage.getItem("customize_changeset_uuid")),a(function(){e=a("#wp-admin-bar-resume-customize-snapshot"),e.length?(e.find("> a").prop("href",d.href),e.show()):confirm(b.data.l10n.restoreSessionPrompt)?location.replace(d.href):sessionStorage.removeItem("customize_changeset_uuid")})))},b.rememberSessionSnapshot=function(){var a=/(^|\?|&)customize_messenger_channel=/.test(location.search);b.hasSessionStorage&&b.data.uuid&&!a&&sessionStorage.setItem("customize_changeset_uuid",b.data.uuid)},b.handleExitSnapshotSessionLink=function(){a(function(){b.hasSessionStorage&&a("#wpadminbar").on("click","#wp-admin-bar-exit-customize-snapshot",function(){sessionStorage.removeItem("customize_changeset_uuid")})})},b.setupPublishButton=function(){var c=a("#wp-admin-bar-publish-customize-changeset a");c.length&&c.click(function(){return!!window.confirm(b.data.confirmationMsg)&&(sessionStorage.removeItem("customize_changeset_uuid"),!0)})},b}(jQuery);